<div class="content-wrapper domain-page">
    <!-- Page Section -->
    <section class="page-section">
        <div class="container-fluid">

            <div class="section-title-wrapper">
                <div class="section-title-inner">
                    <h1 class="section-title section-title__lg">My Purchased Domains</h1>
                </div>
            </div>

			<div ng-if="siteBuildFailure" class="alert alert-danger alert-dismissible fade in text-uppercase">
				<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true"><i class="fa fa-times"></i></span></button>
				<strong>Error!</strong> Unfortunately something went wrong with your site build request. Please try again later or contact us.
			</div>
			<div ng-if="siteBuildSuccess" class="alert alert-success alert-dismissible fade in text-uppercase">
				<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true"><i class="fa fa-times"></i></span></button>
				<strong>Success!</strong> We have received your inquiry for domain <strong>{{siteBuildSuccess}}</strong> and will be in touch with you shortly. 
			</div>
	
            <div class="table-responsive">          
                <table class="table">
                    <tr>
                        <th ng-click="sortType = 'rootURL'; sortReverse = !sortReverse">Domain
                            <span ng-show="sortType == 'rootURL' && !sortReverse" class="fa fa-caret-down"></span>
                            <span ng-show="sortType == 'rootURL' && sortReverse" class="fa fa-caret-up"></span>
                        </th>
                        <th ng-click="sortType = 'purchaseDate'; sortReverse = !sortReverse">Purchased
                            <span ng-show="sortType == 'purchaseDate' && !sortReverse" class="fa fa-caret-down"></span>
                            <span ng-show="sortType == 'purchaseDate' && sortReverse" class="fa fa-caret-up"></span>
                        </th>
                        <th ng-click="sortType = 'credits'; sortReverse = !sortReverse">Credits
                            <span ng-show="sortType == 'credits' && !sortReverse" class="fa fa-caret-down"></span>
                            <span ng-show="sortType == 'credits' && sortReverse" class="fa fa-caret-up"></span>
                        </th>
                        <th ng-click="sortType = 'aggLinkTF'; sortReverse = !sortReverse">Agg Link TF
                            <span ng-show="sortType == 'aggLinkTF' && !sortReverse" class="fa fa-caret-down"></span>
                            <span ng-show="sortType == 'aggLinkTF' && sortReverse" class="fa fa-caret-up"></span>
                        </th>
                        <th ng-click="sortType = 'domTF'; sortReverse = !sortReverse">Dom TF
                            <span ng-show="sortType == 'domTF' && !sortReverse" class="fa fa-caret-down"></span>
                            <span ng-show="sortType == 'domTF' && sortReverse" class="fa fa-caret-up"></span>
                        </th>
                        <th>Site Build Inquiry</th>
                        <th></th>
                        <th></th>
                    </tr>
                    <tr ng-repeat-start="rec in domains|orderBy:sortType:sortReverse" class="domain-row">
                        <td>{{ rec.rootURL}}</td>
                        <td>{{ rec.purchaseDate}}</td>
                        <td>{{ rec.credits}}</td>
                        <td>{{ rec.aggLinkTF}}</td>
                        <td>{{ rec.domTF}}</td>
                        <td ng-show="!rec.siteInquiryMade" ng-click="siteBuild(rec)" class="more-link"><a class="btn btn-sm btn-primary">Make Inquiry</a></td>
                        <td ng-show="rec.siteInquiryMade">Inqury Made</td>
                        <td ng-show="!rec.expanded" ng-click="rec.expanded = !rec.expanded" class="more-link"><a class="btn btn-sm btn-success btn-has-icon"><i class="fa fa-chevron-circle-down"></i>More</a></td>
                        <td ng-show="rec.expanded" ng-click="rec.expanded = !rec.expanded" class="more-link"><a class="btn btn-sm btn-success btn-has-icon"><i class="fa fa-chevron-circle-up"></i>Less</a></td>
                        <td><a class="btn btn-sm btn-success">All</a></td>
                    </tr>
                    <tr ng-show="rec.expanded" ng-repeat-end fr-collapse class="more-info">
                        <td colspan="12" class="more-info-td">
                            <div class="toggle" style="display: none">
                                <table width="100%">
                                    <tr>
                                        <td class="col-md-3"><strong>Domain TF:</strong> {{ rec.domTF}} </td>
                                        <td class="col-md-3"><strong>1<sup>1st</sup> Crawled:</strong> {{ rec.firstCrawlDate}} </td>
                                        <td class="col-md-3"><strong>Found:</strong> {{ rec.found}} </td>
                                        <td class="col-md-3"><strong>Register your domain:</strong></td>
                                    </tr>
                                    <tr>
                                        <td class="col-md-3"><strong>Maj. Agg TF:</strong> {{ rec.aggLinkTF}}</td>
                                        <td class="col-md-3"><strong>Spam Found?</strong> {{ rec.spammedDomain}}</td>
                                        <td class="col-md-3"><strong>Main Majestic Topic:</strong> </td>
                                        <td class="col-md-3">
                                            <div class="form-group">
                                                <select class="form-control selectpicker" id="select-alt" data-type="btn-link" ng-model="selectedRegistrar" ng-options="registrar.name for registrar in registrars">
                                                    <option value="">-- Select a Registrar --</option>
                                                </select>												
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="col-md-3"><strong>TF/CF:</strong> {{ rec.tfcfRatio}}</td>
                                        <td class="col-md-3"><strong>Link Rel:</strong> {{ rec.linkRel}}</td>
                                        <td class="col-md-3">{{ rec.majMainTopic}}</td>
                                        <td class="col-md-3"><button ng-show="selectedRegistrar" ng-click="redirectToRegistrar(selectedRegistrar, rec.rootURL)">Register with {{selectedRegistrar.name}}</button></td>
                                    </tr>
                                    <tr>
                                        <td class="col-md-3"><strong>Ref Dom:</strong> {{ rec.refDom}}</td>
                                        <td class="col-md-3"><strong>TlD:</strong> {{ rec.tld}}</td>
                                        <td class="col-md-3"><strong>Main Alchemy Taxonomy:</strong></td>
                                        <td class="col-md-3"></td>
                                    </tr>
                                    <tr>
                                        <td class="col-md-3"><strong>EDU/Gov:</strong> {{ rec.edugovCount}}</td>
                                        <td class="col-md-3"></td>
                                        <td class="col-md-3">{{ rec.alchMainTaxonomy}}</td>
                                        <td class="col-md-3"></td>
                                    </tr>
                                </table>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>    

        </div>
    </section>
    <!-- Page Section / End -->
</div>